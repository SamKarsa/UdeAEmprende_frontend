<div class="container py-5">
    @if (loading) {
      <div class="text-center py-5">
        <div class="spinner-border text-success" role="status">
          <span class="visually-hidden">Cargando...</span>
        </div>
      </div>
    }
    
    @if (error) {
      <div class="alert alert-danger">
        No se pudo cargar la información del negocio
      </div>
    }
    
    @if (business && !loading) {
      <div class="row">
        <!-- Columna izquierda - Imágenes -->
        <div class="col-lg-6 mb-4">
          <div class="card shadow-sm">
            @if (business.images && business.images.length > 0) {
              <img [src]="business.images[0].imageURL" 
                   class="card-img-top img-fluid" 
                   [alt]="business.businessName">
            } @else {
              <div class="card-img-top bg-light d-flex align-items-center justify-content-center" 
                   style="height: 300px;">
                <span class="text-muted">No hay imagen disponible</span>
              </div>
            }
            
            @if (business.images && business.images.length > 1) {
              <div class="card-body">
                <div class="row g-2">
                  @for (image of business.images.slice(1); track $index) {
                    <div class="col-4 col-md-3">
                      <img [src]="image.imageURL" 
                           class="img-thumbnail cursor-pointer"
                           (click)="changeMainImage(image)">
                    </div>
                  }
                </div>
              </div>
            }
          </div>
        </div>
        
        <!-- Columna derecha - Información -->
        <div class="col-lg-6">
          <h1 class="mb-3">{{ business.businessName }}</h1>
          
          <!-- Badges -->
          <div class="d-flex flex-wrap gap-2 mb-4">
            @if (business.businessCateogries) {
              @for (businessCategory of business.businessCateogries; track businessCategory.businessCategoryId) {
                <span class="badge bg-primary">{{ businessCategory.category.categoryName }}</span>
              }
            }
            @if (business.businessDelivery) {
              <span class="badge bg-success">Delivery disponible</span>
            }
            <span class="badge" [ngClass]="business.businessStatus ? 'bg-success' : 'bg-secondary'">
              {{ business.businessStatus ? 'Abierto' : 'Cerrado' }}
            </span>
          </div>
          
          <!-- Descripción -->
          <div class="mb-4">
            <h4>Descripción</h4>
            <p class="text-muted">{{ business.businessDescription || 'No hay descripción disponible' }}</p>
          </div>
          
          <!-- Detalles -->
          <div class="card mb-4">
            <div class="card-body">
              <h5 class="card-title"><i class="bi bi-info-circle"></i> Información</h5>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <i class="bi bi-clock me-2"></i> <strong>Horario:</strong> {{ business.businessServiceHours }}
                </li>
                <li class="list-group-item">
                  <i class="bi bi-geo-alt me-2"></i> <strong>Ubicación:</strong> {{ business.businessLocation }}
                </li>
                <li class="list-group-item">
                  <i class="bi bi-telephone me-2"></i> <strong>Teléfono:</strong> 
                  <a [href]="'tel:' + business.businessPhoneNumber">{{ business.businessPhoneNumber }}</a>
                </li>
              </ul>
            </div>
          </div>
          
          <!-- Redes sociales -->
          @if (business.socialMedias && business.socialMedias.length > 0) {
            <div class="mb-4">
              <h5><i class="bi bi-share me-2"></i> Redes Sociales</h5>
              <div class="d-flex gap-2">
                @for (social of business.socialMedias; track social.socialMediaId) {
                  <a [href]="social.url" target="_blank" class="btn btn-outline-primary btn-sm">
                    <i [class]="'bi bi-' + social.platform.toLowerCase()"></i>
                  </a>
                }
              </div>
            </div>
          }
          
          <!-- Reseñas -->
          <div>
            <h5><i class="bi bi-star me-2"></i> Reseñas</h5>
            @if (business.reviews && business.reviews.length > 0) {
              <div class="list-group">
                @for (review of business.reviews; track review.reviewId) {
                  <div class="list-group-item">
                    <div class="d-flex justify-content-between">
                      <strong>{{ review.user.email }}</strong>
                      <div class="text-warning">
                        @for (star of [1,2,3,4,5]; track star) {
                          <i class="bi" [class.bi-star-fill]="star <= review.rating" [class.bi-star]="star > review.rating"></i>
                        }
                      </div>
                    </div>
                    <p class="mb-0">{{ review.reviewDescription }}</p>
                    <small class="text-muted">{{ review.createdAt | date:'mediumDate' }}</small>
                  </div>
                }
              </div>
            } @else {
              <p class="text-muted">No hay reseñas todavía</p>
            }
          </div>
        </div>
      </div>
    }
  </div>